(function(t){function e(e){for(var a,o,c=e[0],u=e[1],s=e[2],m=0,d=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},5618:function(t,e,n){},"7a13":function(t,e,n){"use strict";var a=n("5618"),i=n.n(a);i.a},"7dad":function(t,e,n){},9993:function(t,e,n){"use strict";var a=n("7dad"),i=n.n(a);i.a},be82:function(t,e,n){"use strict";var a=n("c77b"),i=n.n(a);i.a},c77b:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("15fd"),r=n.n(i),o=n("2f62"),c=(n("99af"),n("7db0"),n("ac1f"),n("841c"),n("d4ec")),u=n("bee2"),s=function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,[{key:"initialize",value:function(t){return this.gapi=t,this}},{key:"getAlbum",value:function(t){return this.handle((function(e){return e.albums.get({albumId:t}).then((function(t){return t.result}))}),null)}},{key:"listAlbums",value:function(){return this.handle((function(t){return t.albums.list({}).then((function(t){return t.result.albums}))}),[])}},{key:"searchMediaItems",value:function(t,e){return this.handle((function(n){return n.mediaItems.search({resource:{albumId:t,pageSize:100,pageToken:e}}).then((function(t){return t.result}))}))}},{key:"handle",value:function(t,e){var n=this;return this.gapi.getGapiClient().then((function(a){return n.gapi.isSignedIn().then((function(n){return n?t(a.client.photoslibrary):e}))}))}}]),t}(),l=new s,m=l,d={album:null,albums:[],isSignedIn:null,mediaItem:null,mediaItems:[]},b={getAlbum:function(t,e){var n=t.commit,a=t.state;return e?new Promise((function(t){var n=a.albums.find((function(t){return e===t.id}));n?t(n):m.getAlbum(e).then(t)})).then((function(t){n("setAlbum",t),p(n,e)})):n("setAlbum",null)},listAlbums:function(t){var e=t.commit;return e("setAlbums",[]),m.listAlbums().then((function(t){e("setAlbums",t)}))},viewMediaItem:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e("setMediaItem",n)},signIn:function(t,e){var n=t.commit;n("setIsSignedIn",e)}};function p(t,e,n){m.searchMediaItems(e,n).then((function(a){t(n?"addMediaItems":"setMediaItems",a.mediaItems);var i=a.nextPageToken;i&&p(t,e,i)}))}var f={setAlbums:function(t,e){t.albums=e},setAlbum:function(t,e){t.album=e,t.mediaItems=[]},setMediaItems:function(t,e){t.mediaItems=e},addMediaItems:function(t,e){t.mediaItems=t.mediaItems.concat(e)},setMediaItem:function(t,e){t.mediaItem=e},setIsSignedIn:function(t,e){t.isSignedIn=e,e||(t.album=null,t.albums=[],t.mediaItems=[])}},h={namespaced:!0,state:d,actions:b,mutations:f},v=h,g=n("b054"),O=n.n(g);a["a"].use(o["b"]);var j=!1,I={modules:{photos:v},strict:j,plugins:j?[O()()]:[]},y=new o["b"].Store(I),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.externalStatePath?t._e():n("div",[n("Login"),n("SelectAlbum",{model:{value:t.selectedAlbumId,callback:function(e){t.selectedAlbumId=e},expression:"selectedAlbumId"}}),t.selectedAlbumId?n("TextareaExternalState"):t._e(),n("hr")],1),n("Album",{attrs:{"album-id":t.selectedAlbumId}})],1)},S=[],x=n("262e"),A=n("2caf"),k=n("9ab4"),w=n("60a3"),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{attrs:{disabled:!t.isSignedIn||0===t.albums.length},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},[n("option",{attrs:{value:""}},[t._v("Select Album...")]),t._l(t.albums,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])}))],2)},T=[],P=Object(o["a"])("photos"),$=P.mapActions,E=P.mapState,C=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(u["a"])(n,[{key:"created",value:function(){this.listAlbums()}}]),n}(w["c"]);Object(k["a"])([Object(w["b"])(String)],C.prototype,"value",void 0),Object(k["a"])([Object(w["d"])("isSignedIn")],C.prototype,"listAlbums",void 0),C=Object(k["a"])([Object(w["a"])({computed:E(["albums","isSignedIn"]),methods:$(["listAlbums"])})],C);var U=C,J=U,L=n("2877"),N=Object(L["a"])(J,M,T,!1,null,null,null),D=N.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.album?n("div",{class:{"is-viewing-media-item":t.mediaItem}},[n("header",[n("h1",[t._v(t._s(t.album.title))]),n("nav",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{type:"radio",id:"format-image",value:"photo"},domProps:{checked:t._q(t.format,"photo")},on:{change:function(e){t.format="photo"}}}),n("label",{attrs:{for:"format-image"}},[t._v("Photo")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{type:"radio",id:"format-text",value:"text"},domProps:{checked:t._q(t.format,"text")},on:{change:function(e){t.format="text"}}}),n("label",{attrs:{for:"format-text"}},[t._v("Text")])])]),n("ul",t._l(t.mediaItems,(function(e){return n("AlbumMediaItem",{key:e.id,attrs:{format:t.format,"media-item":e}})})),1),t.mediaItem?n("aside",{on:{click:function(e){return t.viewMediaItem(null)}}},[n("img",{attrs:{src:t.mediaItem.baseUrl}})]):t._e()]):t._e()},z=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["is-"+t.format],attrs:{title:t.description}},[n("a",{on:{click:function(e){return t.view()}}},["photo"===t.format?n("AlbumMediaItemImage",{attrs:{"description-theme":t.descriptionTheme,"media-item":t.mediaItem}}):n("AlbumMediaItemText",{attrs:{"description-theme":t.descriptionTheme}})],1)])},G=[],H=(n("a4d3"),n("e01a"),n("466d"),n("5319"),n("1276"),n("498a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{style:{"background-color":t.backgroundColor},attrs:{alt:t.descriptionTheme,src:t.mediaItem.baseUrl}})}),F=[],K=n("fb2f"),Q=n.n(K);function R(t,e){return Q()(t).lightness(2*Math.random()*e-e,!0).hex()}var V="#202124",W=.1,X=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.backgroundColor=R(V,W),t}return n}(w["c"]);Object(k["a"])([Object(w["b"])(String)],X.prototype,"descriptionTheme",void 0),Object(k["a"])([Object(w["b"])(Object)],X.prototype,"mediaItem",void 0),X=Object(k["a"])([w["a"]],X);var Y=X,Z=Y,tt=(n("7a13"),Object(L["a"])(Z,H,F,!1,null,"096a4bf0",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{style:t.style},[t._v(t._s(t.descriptionTheme))])},at=[],it="#a7a7a7",rt=.25,ot=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.color=R(it,rt),t}return Object(u["a"])(n,[{key:"style",get:function(){return{color:this.color,"font-weight":100*(Math.floor(7*Math.random())+1)}}}]),n}(w["c"]);Object(k["a"])([Object(w["b"])(String)],ot.prototype,"descriptionTheme",void 0),ot=Object(k["a"])([w["a"]],ot);var ct=ot,ut=ct,st=Object(L["a"])(ut,nt,at,!1,null,null,null),lt=st.exports,mt=Object(o["a"])("photos"),dt=mt.mapActions,bt=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.descriptionTheme="",t}return Object(u["a"])(n,[{key:"created",value:function(){this.description?this.descriptionTheme="".concat(this.extractDescriptionTheme(this.description)," "):console.warn("Media item does not have description",this.mediaItem)}},{key:"view",value:function(){this.viewMediaItem(this.mediaItem),"undefined"!==typeof this.$gtag&&this.$gtag.event("Click",{event_category:this.format,event_label:this.descriptionTheme})}},{key:"extractDescriptionTheme",value:function(t){var e=t.replace(/[\u201C\u201D]/g,'"'),n=e.match(/[^"]*"([^"]+)"[^"]*/);return 3===e.split('"').length&&null!==n||console.warn("Potentially unable to parse description",{description:t,baseUrl:this.mediaItem.baseUrl}),null===n?t:n[1]}},{key:"description",get:function(){var t=this.mediaItem.description;return t?t.trim():""}}]),n}(w["c"]);Object(k["a"])([Object(w["b"])(Object)],bt.prototype,"mediaItem",void 0),Object(k["a"])([Object(w["b"])(String)],bt.prototype,"format",void 0),bt=Object(k["a"])([Object(w["a"])({components:{AlbumMediaItemText:lt,AlbumMediaItemImage:et},methods:dt(["viewMediaItem"])})],bt);var pt,ft=bt,ht=ft,vt=(n("be82"),Object(L["a"])(ht,B,G,!1,null,"adc748a4",null)),gt=vt.exports;(function(t){t["Photo"]="photo",t["Text"]="text"})(pt||(pt={}));var Ot=Object(o["a"])("photos"),jt=Ot.mapActions,It=Ot.mapState,yt=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.format=pt.Photo,t}return n}(w["c"]);Object(k["a"])([Object(w["b"])(String)],yt.prototype,"albumId",void 0),Object(k["a"])([Object(w["d"])("albumId")],yt.prototype,"getAlbum",void 0),yt=Object(k["a"])([Object(w["a"])({components:{AlbumMediaItem:gt},computed:It(["album","mediaItem","mediaItems"]),methods:jt(["getAlbum","viewMediaItem"])})],yt);var _t=yt,St=_t,xt=(n("eb11"),Object(L["a"])(St,q,z,!1,null,"42f4186e",null)),At=xt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.isSignedIn?n("button",{attrs:{type:"button"},on:{click:function(e){return t.logout()}}},[t._v(" Logout ")]):t._e(),t.isSignedIn?t._e():n("button",{attrs:{disabled:null===t.isSignedIn,type:"button"},on:{click:function(e){return t.login()}}},[t._v(" Login ")])])},wt=[],Mt=Object(o["a"])("photos"),Tt=Mt.mapState,Pt=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(u["a"])(n,[{key:"login",value:function(){this.$gapi.login()}},{key:"logout",value:function(){this.$gapi.logout()}}]),n}(w["c"]);Pt=Object(k["a"])([Object(w["a"])({computed:Tt(["isSignedIn"])})],Pt);var $t=Pt,Et=$t,Ct=Object(L["a"])(Et,kt,wt,!1,null,null,null),Ut=Ct.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{attrs:{readonly:""},domProps:{value:t.state}})},Lt=[],Nt=(n("baa5"),n("d81d"),function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(u["a"])(n,[{key:"state",get:function(){var t={},e=JSON.parse(JSON.stringify(this.$store.state)),n="".concat(document.title.replace("/","_"),"_files");return e.photos.albums=[],e.photos.mediaItems=e.photos.mediaItems.map((function(e){var a=e.filename,i=a.lastIndexOf("."),r=a.substring(1+i,a.length);"HEIC"===r&&(r="jpg"),a=a.substring(0,i).replace("~","_");var o=a.toLowerCase();return"undefined"!==typeof t[o]?a+="(".concat(t[o]++,")"):t[o]=1,e.baseUrl="".concat(n,"/").concat(a,".").concat(r),e})),JSON.stringify(e)}}]),n}(w["c"]));Nt=Object(k["a"])([Object(w["a"])({})],Nt);var Dt=Nt,qt=Dt,zt=Object(L["a"])(qt,Jt,Lt,!1,null,null,null),Bt=zt.exports,Gt=Object(o["a"])("photos"),Ht=Gt.mapActions,Ft=Gt.mapState,Kt=function(t){Object(x["a"])(n,t);var e=Object(A["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.defaultTitle="",t.selectedAlbumId="",t}return Object(u["a"])(n,[{key:"created",value:function(){this.$gapi&&(this.$gapi.isSignedIn().then(this.signIn),this.$gapi.listenUserSignIn(this.signIn)),this.defaultTitle=document.title}},{key:"onAlbumChange",value:function(t){document.title=t&&t.title?t.title:this.defaultTitle}}]),n}(w["c"]);Object(k["a"])([Object(w["b"])(String)],Kt.prototype,"externalStatePath",void 0),Object(k["a"])([Object(w["d"])("album")],Kt.prototype,"onAlbumChange",null),Kt=Object(k["a"])([Object(w["a"])({components:{TextareaExternalState:Bt,Login:Ut,Album:At,SelectAlbum:D},computed:Ft(["album","isSignedIn"]),methods:Ht(["signIn"])})],Kt);var Qt=Kt,Rt=Qt,Vt=(n("9993"),Object(L["a"])(Rt,_,S,!1,null,null,null)),Wt=Vt.exports,Xt=n("a584"),Yt="643157340864-6dlup4og9711115j4phha6meqp02hd6b.apps.googleusercontent.com",Zt="UA-17188743-25";a["a"].config.productionTip=!1;var te="app",ee=document.getElementById(te).dataset.externalStatePath;ee?fetch(ee).then((function(t){return t.json().then(y.replaceState.bind(y))})):a["a"].use(r.a,{discoveryDocs:["https://photoslibrary.googleapis.com/$discovery/rest?version=v1"],clientId:Yt,scope:"https://www.googleapis.com/auth/photoslibrary.readonly"}),Zt&&a["a"].use(Xt["a"],{config:{id:Zt}}),new a["a"]({created:function(){m.initialize(this.$gapi)},render:function(t){return t(Wt,{props:{externalStatePath:ee}})},store:y}).$mount("#".concat(te))},eb11:function(t,e,n){"use strict";var a=n("eb4e"),i=n.n(a);i.a},eb4e:function(t,e,n){}});
//# sourceMappingURL=app.dc8c1b75.js.map