(function(t){function e(e){for(var a,r,c=e[0],u=e[1],s=e[2],m=0,d=[];m<c.length;m++)r=c[m],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},5618:function(t,e,n){},"7a13":function(t,e,n){"use strict";var a=n("5618"),i=n.n(a);i.a},"7dad":function(t,e,n){},9993:function(t,e,n){"use strict";var a=n("7dad"),i=n.n(a);i.a},be82:function(t,e,n){"use strict";var a=n("c77b"),i=n.n(a);i.a},c77b:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("15fd"),o=n.n(i),r=n("2f62"),c=(n("99af"),n("7db0"),n("ac1f"),n("841c"),n("d4ec")),u=n("bee2"),s=function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,[{key:"initialize",value:function(t){return this.gapi=t,this}},{key:"getAlbum",value:function(t){return this.handle((function(e){return e.albums.get({albumId:t}).then((function(t){return t.result}))}),null)}},{key:"listAlbums",value:function(){return this.handle((function(t){return t.albums.list({}).then((function(t){return t.result.albums}))}),[])}},{key:"searchMediaItems",value:function(t,e){return this.handle((function(n){return n.mediaItems.search({resource:{albumId:t,pageSize:100,pageToken:e}}).then((function(t){return t.result}))}))}},{key:"handle",value:function(t,e){var n=this;return this.gapi.getGapiClient().then((function(a){return n.gapi.isSignedIn().then((function(n){return n?t(a.client.photoslibrary):e}))}))}}]),t}(),l=new s,m=l,d={album:null,albums:[],isSignedIn:null,mediaItem:null,mediaItems:[]},b={getAlbum:function(t,e){var n=t.commit,a=t.state;return e?new Promise((function(t){var n=a.albums.find((function(t){return e===t.id}));n?t(n):m.getAlbum(e).then(t)})).then((function(t){n("setAlbum",t),p(n,e)})):n("setAlbum",null)},listAlbums:function(t){var e=t.commit;return e("setAlbums",[]),m.listAlbums().then((function(t){e("setAlbums",t)}))},viewMediaItem:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e("setMediaItem",n)},signIn:function(t,e){var n=t.commit;n("setIsSignedIn",e)}};function p(t,e,n){m.searchMediaItems(e,n).then((function(a){t(n?"addMediaItems":"setMediaItems",a.mediaItems);var i=a.nextPageToken;i&&p(t,e,i)}))}var f={setAlbums:function(t,e){t.albums=e},setAlbum:function(t,e){t.album=e,t.mediaItems=[]},setMediaItems:function(t,e){t.mediaItems=e},addMediaItems:function(t,e){t.mediaItems=t.mediaItems.concat(e)},setMediaItem:function(t,e){t.mediaItem=e},setIsSignedIn:function(t,e){t.isSignedIn=e,e||(t.album=null,t.albums=[],t.mediaItems=[])}},h={namespaced:!0,state:d,actions:b,mutations:f},v=h,g=n("b054"),O=n.n(g);a["a"].use(r["b"]);var j=!1,I={modules:{photos:v},strict:j,plugins:j?[O()()]:[]},y=new r["b"].Store(I),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.externalStatePath?t._e():n("div",[n("Login"),n("SelectAlbum",{model:{value:t.selectedAlbumId,callback:function(e){t.selectedAlbumId=e},expression:"selectedAlbumId"}}),t.selectedAlbumId?n("TextareaExternalState"):t._e(),n("hr")],1),n("Album",{attrs:{"album-id":t.selectedAlbumId}})],1)},S=[],x=n("99de"),A=n("7e84"),k=n("262e"),w=n("9ab4"),M=n("60a3"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{attrs:{disabled:!t.isSignedIn||0===t.albums.length},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},[n("option",{attrs:{value:""}},[t._v("Select Album...")]),t._l(t.albums,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])}))],2)},P=[],$=Object(r["a"])("photos"),E=$.mapActions,C=$.mapState,U=function(t){function e(){return Object(c["a"])(this,e),Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments))}return Object(k["a"])(e,t),Object(u["a"])(e,[{key:"created",value:function(){this.listAlbums()}}]),e}(M["c"]);Object(w["a"])([Object(M["b"])(String)],U.prototype,"value",void 0),Object(w["a"])([Object(M["d"])("isSignedIn")],U.prototype,"listAlbums",void 0),U=Object(w["a"])([Object(M["a"])({computed:C(["albums","isSignedIn"]),methods:E(["listAlbums"])})],U);var J=U,L=J,N=n("2877"),D=Object(N["a"])(L,T,P,!1,null,null,null),q=D.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.album?n("div",{class:{"is-viewing-media-item":t.mediaItem}},[n("header",[n("h1",[t._v(t._s(t.album.title))]),n("nav",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{type:"radio",id:"format-image",value:"photo"},domProps:{checked:t._q(t.format,"photo")},on:{change:function(e){t.format="photo"}}}),n("label",{attrs:{for:"format-image"}},[t._v("Photo")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{type:"radio",id:"format-text",value:"text"},domProps:{checked:t._q(t.format,"text")},on:{change:function(e){t.format="text"}}}),n("label",{attrs:{for:"format-text"}},[t._v("Text")])])]),n("ul",t._l(t.mediaItems,(function(e){return n("AlbumMediaItem",{key:e.id,attrs:{format:t.format,"media-item":e}})})),1),t.mediaItem?n("aside",{on:{click:function(e){return t.viewMediaItem(null)}}},[n("img",{attrs:{src:t.mediaItem.baseUrl}})]):t._e()]):t._e()},B=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["is-"+t.format],attrs:{title:t.description}},[n("a",{on:{click:function(e){return t.view()}}},["photo"===t.format?n("AlbumMediaItemImage",{attrs:{"description-theme":t.descriptionTheme,"media-item":t.mediaItem}}):n("AlbumMediaItemText",{attrs:{"description-theme":t.descriptionTheme}})],1)])},H=[],F=(n("a4d3"),n("e01a"),n("466d"),n("5319"),n("1276"),n("498a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{style:{"background-color":t.backgroundColor},attrs:{alt:t.descriptionTheme,src:t.mediaItem.baseUrl}})}),K=[],Q=n("fb2f"),R=n.n(Q);function V(t,e){return R()(t).lightness(2*Math.random()*e-e,!0).hex()}var W="#202124",X=.1,Y=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments)),t.backgroundColor=V(W,X),t}return Object(k["a"])(e,t),e}(M["c"]);Object(w["a"])([Object(M["b"])(String)],Y.prototype,"descriptionTheme",void 0),Object(w["a"])([Object(M["b"])(Object)],Y.prototype,"mediaItem",void 0),Y=Object(w["a"])([M["a"]],Y);var Z=Y,tt=Z,et=(n("7a13"),Object(N["a"])(tt,F,K,!1,null,"096a4bf0",null)),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{style:t.style},[t._v(t._s(t.descriptionTheme))])},it=[],ot="#a7a7a7",rt=.25,ct=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments)),t.color=V(ot,rt),t}return Object(k["a"])(e,t),Object(u["a"])(e,[{key:"style",get:function(){return{color:this.color,"font-weight":100*(Math.floor(7*Math.random())+1)}}}]),e}(M["c"]);Object(w["a"])([Object(M["b"])(String)],ct.prototype,"descriptionTheme",void 0),ct=Object(w["a"])([M["a"]],ct);var ut=ct,st=ut,lt=Object(N["a"])(st,at,it,!1,null,null,null),mt=lt.exports,dt=Object(r["a"])("photos"),bt=dt.mapActions,pt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments)),t.descriptionTheme="",t}return Object(k["a"])(e,t),Object(u["a"])(e,[{key:"created",value:function(){this.description?this.descriptionTheme="".concat(this.extractDescriptionTheme(this.description)," "):console.warn("Media item does not have description",this.mediaItem)}},{key:"view",value:function(){this.viewMediaItem(this.mediaItem),"undefined"!==typeof this.$gtag&&this.$gtag.event("Click",{event_category:this.format,event_label:this.descriptionTheme})}},{key:"extractDescriptionTheme",value:function(t){var e=t.replace(/[\u201C\u201D]/g,'"'),n=e.match(/[^"]*"([^"]+)"[^"]*/);return 3===e.split('"').length&&null!==n||console.warn("Potentially unable to parse description",{description:t,baseUrl:this.mediaItem.baseUrl}),null===n?t:n[1]}},{key:"description",get:function(){var t=this.mediaItem.description;return t?t.trim():""}}]),e}(M["c"]);Object(w["a"])([Object(M["b"])(Object)],pt.prototype,"mediaItem",void 0),Object(w["a"])([Object(M["b"])(String)],pt.prototype,"format",void 0),pt=Object(w["a"])([Object(M["a"])({components:{AlbumMediaItemText:mt,AlbumMediaItemImage:nt},methods:bt(["viewMediaItem"])})],pt);var ft,ht=pt,vt=ht,gt=(n("be82"),Object(N["a"])(vt,G,H,!1,null,"adc748a4",null)),Ot=gt.exports;(function(t){t["Photo"]="photo",t["Text"]="text"})(ft||(ft={}));var jt=Object(r["a"])("photos"),It=jt.mapActions,yt=jt.mapState,_t=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments)),t.format=ft.Photo,t}return Object(k["a"])(e,t),e}(M["c"]);Object(w["a"])([Object(M["b"])(String)],_t.prototype,"albumId",void 0),Object(w["a"])([Object(M["d"])("albumId")],_t.prototype,"getAlbum",void 0),_t=Object(w["a"])([Object(M["a"])({components:{AlbumMediaItem:Ot},computed:yt(["album","mediaItem","mediaItems"]),methods:It(["getAlbum","viewMediaItem"])})],_t);var St=_t,xt=St,At=(n("eb11"),Object(N["a"])(xt,z,B,!1,null,"42f4186e",null)),kt=At.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.isSignedIn?n("button",{attrs:{type:"button"},on:{click:function(e){return t.logout()}}},[t._v(" Logout ")]):t._e(),t.isSignedIn?t._e():n("button",{attrs:{disabled:null===t.isSignedIn,type:"button"},on:{click:function(e){return t.login()}}},[t._v(" Login ")])])},Mt=[],Tt=Object(r["a"])("photos"),Pt=Tt.mapState,$t=function(t){function e(){return Object(c["a"])(this,e),Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments))}return Object(k["a"])(e,t),Object(u["a"])(e,[{key:"login",value:function(){this.$gapi.login()}},{key:"logout",value:function(){this.$gapi.logout()}}]),e}(M["c"]);$t=Object(w["a"])([Object(M["a"])({computed:Pt(["isSignedIn"])})],$t);var Et=$t,Ct=Et,Ut=Object(N["a"])(Ct,wt,Mt,!1,null,null,null),Jt=Ut.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{attrs:{readonly:""},domProps:{value:t.state}})},Nt=[],Dt=(n("baa5"),n("d81d"),function(t){function e(){return Object(c["a"])(this,e),Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments))}return Object(k["a"])(e,t),Object(u["a"])(e,[{key:"state",get:function(){var t={},e=JSON.parse(JSON.stringify(this.$store.state)),n="".concat(document.title.replace("/","_"),"_files");return e.photos.albums=[],e.photos.mediaItems=e.photos.mediaItems.map((function(e){var a=e.filename,i=a.lastIndexOf("."),o=a.substring(1+i,a.length);"HEIC"===o&&(o="jpg"),a=a.substring(0,i).replace("~","_");var r=a.toLowerCase();return"undefined"!==typeof t[r]?a+="(".concat(t[r]++,")"):t[r]=1,e.baseUrl="".concat(n,"/").concat(a,".").concat(o),e})),JSON.stringify(e)}}]),e}(M["c"]));Dt=Object(w["a"])([Object(M["a"])({})],Dt);var qt=Dt,zt=qt,Bt=Object(N["a"])(zt,Lt,Nt,!1,null,null,null),Gt=Bt.exports,Ht=Object(r["a"])("photos"),Ft=Ht.mapActions,Kt=Ht.mapState,Qt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(x["a"])(this,Object(A["a"])(e).apply(this,arguments)),t.defaultTitle="",t.selectedAlbumId="",t}return Object(k["a"])(e,t),Object(u["a"])(e,[{key:"created",value:function(){this.$gapi&&(this.$gapi.isSignedIn().then(this.signIn),this.$gapi.listenUserSignIn(this.signIn)),this.defaultTitle=document.title}},{key:"onAlbumChange",value:function(t){document.title=t&&t.title?t.title:this.defaultTitle}}]),e}(M["c"]);Object(w["a"])([Object(M["b"])(String)],Qt.prototype,"externalStatePath",void 0),Object(w["a"])([Object(M["d"])("album")],Qt.prototype,"onAlbumChange",null),Qt=Object(w["a"])([Object(M["a"])({components:{TextareaExternalState:Gt,Login:Jt,Album:kt,SelectAlbum:q},computed:Kt(["album","isSignedIn"]),methods:Ft(["signIn"])})],Qt);var Rt=Qt,Vt=Rt,Wt=(n("9993"),Object(N["a"])(Vt,_,S,!1,null,null,null)),Xt=Wt.exports,Yt=n("a584"),Zt="643157340864-6dlup4og9711115j4phha6meqp02hd6b.apps.googleusercontent.com",te="UA-17188743-25";a["a"].config.productionTip=!1;var ee="app",ne=document.getElementById(ee).dataset.externalStatePath;ne?fetch(ne).then((function(t){return t.json().then(y.replaceState.bind(y))})):a["a"].use(o.a,{discoveryDocs:["https://photoslibrary.googleapis.com/$discovery/rest?version=v1"],clientId:Zt,scope:"https://www.googleapis.com/auth/photoslibrary.readonly"}),te&&a["a"].use(Yt["a"],{config:{id:te}}),new a["a"]({created:function(){m.initialize(this.$gapi)},render:function(t){return t(Xt,{props:{externalStatePath:ne}})},store:y}).$mount("#".concat(ee))},eb11:function(t,e,n){"use strict";var a=n("eb4e"),i=n.n(a);i.a},eb4e:function(t,e,n){}});
//# sourceMappingURL=app.1ed98f9d.js.map